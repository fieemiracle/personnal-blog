(window.webpackJsonp=window.webpackJsonp||[]).push([[34],{438:function(s,a,n){"use strict";n.r(a);var t=n(1),e=Object(t.a)({},(function(){var s=this,a=s._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("p",[s._v("“我报名参加金石计划1期挑战——瓜分10万奖池，这是我的第1篇文章，"),a("a",{attrs:{href:"https://s.juejin.cn/ds/jooSN7t",title:"https://s.juejin.cn/ds/jooSN7t",target:"_blank",rel:"noopener noreferrer"}},[s._v("点击查看活动详情"),a("OutboundLink")],1),s._v("”")]),s._v(" "),a("p",[s._v("vue-router路由用着是不是香香的？简单易上手。其实，前端路由也是简单易上手哦，一起来学学趴~。")]),s._v(" "),a("h2",{attrs:{id:"一、先看看vue-router的效果"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#一、先看看vue-router的效果"}},[s._v("#")]),s._v(" 一、先看看vue-router的效果")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/ebbef77a406f41789db05e0ca90c9427~tplv-k3u1fbpfcp-watermark.image?",alt:"Video_Vue.gif"}})]),s._v(" "),a("h2",{attrs:{id:"二、什么是前端路由"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#二、什么是前端路由"}},[s._v("#")]),s._v(" 二、什么是前端路由")]),s._v(" "),a("p",[s._v("前端路由就是把"),a("code",[s._v("不同路由对应不同的内容或页面")]),s._v("的任务交给前端来做，之前是通过服务端根据 url 不同返回不同的页面来实现。")]),s._v(" "),a("p",[a("code",[s._v("前端路由描述的是URL和UI之间的映射关系,单向映射。")])]),s._v(" "),a("h2",{attrs:{id:"三、前端路由解决的两个主要问题"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#三、前端路由解决的两个主要问题"}},[s._v("#")]),s._v(" 三、前端路由解决的两个主要问题")]),s._v(" "),a("p",[s._v("1、如何检测URL发生了变化")]),s._v(" "),a("p",[s._v("2、如何改变URL却不引起页面的刷新(例如，变成hash的改变)")]),s._v(" "),a("h2",{attrs:{id:"四、实现前端路由的方案"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#四、实现前端路由的方案"}},[s._v("#")]),s._v(" 四、实现前端路由的方案")]),s._v(" "),a("h3",{attrs:{id:"_1、hash模式"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1、hash模式"}},[s._v("#")]),s._v(" 1、hash模式")]),s._v(" "),a("p",[s._v("什么是hash？hash模式是基于锚点的原理实现。在 location 对象属性中，"),a("strong",[s._v("location .hash 是设置或返回从井号(#)开始的URL(锚)")]),s._v("。使用hash模式一定有一个#，并且通过这个模式，"),a("em",[s._v("改变url中的hash值部分，页面是不会刷新的")]),s._v("，这就解决了第一个主要问题。")]),s._v(" "),a("h4",{attrs:{id:"看看demo"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#看看demo"}},[s._v("#")]),s._v(" 看看demo：")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('    <body>\n        <ul>\n            \x3c!-- hash模式如何改变URL？在路径面前添加#，这里展示的是三个不同的URL --\x3e\n            <li><a href="#/home">首页</a></li>\n            <li><a href="#/about">关于</a></li>\n            <li><a href="#/mine">我的</a></li>\n        </ul>\n​\n        \x3c!-- 准备一个容器，渲染对应的UI，相当于vue-router里面的<router-view></router-view> --\x3e\n        <div id="routerView"></div>\n​\n        <script>\n            let routerView = document.getElementById(\'routerView\');\n            // 页面加载完毕(强制匹配一次)\n            window.addEventListener(\'load\', onHashchange);\n            // 监听hash改变\n            window.addEventListener(\'hashchange\', onHashchange);\n​\n            // 控制渲染对应的UI\n            function onHashchange() {\n                console.log(location.hash);\n                //设置不同路由对应不同的内容\n                switch (location.hash) {\n                    case \'#/home\':\n                        routerView.innerHTML = "Home"\n                        return\n                    case \'#/about\':\n                        routerView.innerHTML = "About"\n                        return\n                    case \'#/mine\':\n                        routerView.innerHTML = "Mine"\n                        return\n                    default:\n                        return\n                }\n            }\n        <\/script>\n    </body>\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br"),a("span",{staticClass:"line-number"},[s._v("31")]),a("br"),a("span",{staticClass:"line-number"},[s._v("32")]),a("br"),a("span",{staticClass:"line-number"},[s._v("33")]),a("br"),a("span",{staticClass:"line-number"},[s._v("34")]),a("br"),a("span",{staticClass:"line-number"},[s._v("35")]),a("br"),a("span",{staticClass:"line-number"},[s._v("36")]),a("br"),a("span",{staticClass:"line-number"},[s._v("37")]),a("br"),a("span",{staticClass:"line-number"},[s._v("38")]),a("br")])]),a("h4",{attrs:{id:"实现效果长这样"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#实现效果长这样"}},[s._v("#")]),s._v(" 实现效果长这样：")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/bf90c6724e8f4a538162e155650ff3e8~tplv-k3u1fbpfcp-watermark.image?",alt:"hash_vedio (1).gif"}})]),s._v(" "),a("h4",{attrs:{id:"hash-模式适用场景"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#hash-模式适用场景"}},[s._v("#")]),s._v(" "),a("strong",[s._v("hash 模式适用场景：")])]),s._v(" "),a("p",[s._v("无重定向传参需求(第三方认证 oauth) ，兼容IE8，无锚点跳跃需求，后端不需要跟踪前端路由信息。")]),s._v(" "),a("h4",{attrs:{id:"优缺点分析"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#优缺点分析"}},[s._v("#")]),s._v(" 优缺点分析：")]),s._v(" "),a("p",[s._v("（1）优点：实现简单，兼容性好，绝大多数前端框架提供了 hash 的路由实现，不需要服务器端进行任何设置和开。除资源加载和 ajax 请求外，不发起其他请求。")]),s._v(" "),a("p",[s._v("（2）缺点：需要重定向的操作，后端无法获取 hash 部分内容，也就是后台无法取得url中的数据。换句话说，服务器端无法准确跟踪前端路由信息，对于需要锚点功能的需求会与目前路由机制冲突。")]),s._v(" "),a("h3",{attrs:{id:"_2、history模式"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2、history模式"}},[s._v("#")]),s._v(" 2、history模式")]),s._v(" "),a("p",[s._v("HTML5提供的一个对象方法，")]),s._v(" "),a("p",[s._v("修改url,是不会引起页面刷新的 ：")]),s._v(" "),a("p",[s._v("（1）pushState() （文章使用这个）")]),s._v(" "),a("p",[s._v("（2）replaceState()")]),s._v(" "),a("p",[s._v("检测url变化 ：")]),s._v(" "),a("p",[s._v("（3）popState()")]),s._v(" "),a("h4",{attrs:{id:"看看demo-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#看看demo-2"}},[s._v("#")]),s._v(" 看看demo:")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("    <body>\n        <ul>\n            \x3c!-- history模式如何改变URL？直接写，不需要# --\x3e\n            <li><a href=\"/home\">首页</a></li>\n            <li><a href=\"/about\">关于</a></li>\n            <li><a href=\"/mine\">我的</a></li>\n        </ul>\n​\n        \x3c!-- 准备一个容器，渲染对应的UI，相当于vue-router里面的<router-view></router-view> --\x3e\n        <div id=\"routerView\"></div>\n​\n        <script>\n            let routerView = document.getElementById('routerView');\n            window.addEventListener('DOMContentLoaded', onLoad);\n            window.addEventListener('popstate', onPopState); //浏览器前进后退内容与路由能够匹配\n​\n            function onLoad() {\n                onPopState()\n                let links = document.querySelectorAll('li a[href]');\n                // 拦截a标签的默认跳转行为\n                links.forEach(a => {\n                    a.addEventListener('click', (e) => {\n                    // e.stopImmediatePropagation()  \n                    //阻止剩下的事件处理程序执行。会阻止冒泡。停止当前节点和所有后续节点的事件处理程序的运行。\n                    // e.stopPropagation() \n                    //阻止事件向上层元素冒泡。若同一个元素绑定多个事件（如addEventListener），则不阻止其他事件的执行\n                        \n                        // 阻止a标签href的默认行为\n                        e.preventDefault();\n                        console.log(123);\n                        history.pushState(null, '', a.getAttribute('href'));\n                        onPopState()\n                    })\n                })\n​\n            }\n​\n            function onPopState() {\n                console.log(location);\n                switch (location.pathname) {\n                    case '/home':\n                        routerView.innerHTML = 'Home'\n                        return\n                    case '/about':\n                        routerView.innerHTML = 'about'\n                        return\n                    case '/mine':\n                        routerView.innerHTML = 'mine'\n                        return\n                    default:\n                        return\n                }\n            }\n        <\/script>\n    </body>\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br"),a("span",{staticClass:"line-number"},[s._v("31")]),a("br"),a("span",{staticClass:"line-number"},[s._v("32")]),a("br"),a("span",{staticClass:"line-number"},[s._v("33")]),a("br"),a("span",{staticClass:"line-number"},[s._v("34")]),a("br"),a("span",{staticClass:"line-number"},[s._v("35")]),a("br"),a("span",{staticClass:"line-number"},[s._v("36")]),a("br"),a("span",{staticClass:"line-number"},[s._v("37")]),a("br"),a("span",{staticClass:"line-number"},[s._v("38")]),a("br"),a("span",{staticClass:"line-number"},[s._v("39")]),a("br"),a("span",{staticClass:"line-number"},[s._v("40")]),a("br"),a("span",{staticClass:"line-number"},[s._v("41")]),a("br"),a("span",{staticClass:"line-number"},[s._v("42")]),a("br"),a("span",{staticClass:"line-number"},[s._v("43")]),a("br"),a("span",{staticClass:"line-number"},[s._v("44")]),a("br"),a("span",{staticClass:"line-number"},[s._v("45")]),a("br"),a("span",{staticClass:"line-number"},[s._v("46")]),a("br"),a("span",{staticClass:"line-number"},[s._v("47")]),a("br"),a("span",{staticClass:"line-number"},[s._v("48")]),a("br"),a("span",{staticClass:"line-number"},[s._v("49")]),a("br"),a("span",{staticClass:"line-number"},[s._v("50")]),a("br"),a("span",{staticClass:"line-number"},[s._v("51")]),a("br"),a("span",{staticClass:"line-number"},[s._v("52")]),a("br"),a("span",{staticClass:"line-number"},[s._v("53")]),a("br"),a("span",{staticClass:"line-number"},[s._v("54")]),a("br"),a("span",{staticClass:"line-number"},[s._v("55")]),a("br")])]),a("h4",{attrs:{id:"实现效果长这样-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#实现效果长这样-2"}},[s._v("#")]),s._v(" 实现效果长这样：")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/bda48f07c9344a10974db458247cb60e~tplv-k3u1fbpfcp-watermark.image?",alt:"history.gif"}})]),s._v(" "),a("h4",{attrs:{id:"history-模式适用场景"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#history-模式适用场景"}},[s._v("#")]),s._v(" "),a("strong",[s._v("history 模式适用场景：")])]),s._v(" "),a("p",[s._v("页面"),a("strong",[s._v("锚点需求")]),s._v("，需"),a("strong",[s._v("重定向传参")]),s._v("，后端跟踪路由信息，附加路由信息(history.state)获取路由状态。")]),s._v(" "),a("h4",{attrs:{id:"优缺点分析-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#优缺点分析-2"}},[s._v("#")]),s._v(" 优缺点分析：")]),s._v(" "),a("p",[s._v("（1）优点：重定向过程中不会丢失url参数。后端可以拿到数据。绝大多数前段框架提供了 history 模式的路由实现。后端可准确跟踪路由信息，history.state 可获取当前 url 对应的状态信息。")]),s._v(" "),a("p",[s._v("（2）缺点：兼容性只兼容到 IE10， 需要后端支持。")])])}),[],!1,null,null,null);a.default=e.exports}}]);