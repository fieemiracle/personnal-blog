{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[42],{448:function(s,n,a){\"use strict\";a.r(n);var e=a(1),t=Object(e.a)({},(function(){var s=this,n=s._self._c;return n(\"ContentSlotsDistributor\",{attrs:{\"slot-key\":s.$parent.slotKey}},[n(\"p\",[s._v(\"“我报名参加金石计划1期挑战——瓜分10万奖池，这是我的第2篇文章，\"),n(\"a\",{attrs:{href:\"https://s.juejin.cn/ds/jooSN7t\",title:\"https://s.juejin.cn/ds/jooSN7t\",target:\"_blank\",rel:\"noopener noreferrer\"}},[s._v(\"点击查看活动详情\"),n(\"OutboundLink\")],1),s._v(\"”\")]),s._v(\" \"),n(\"p\",[s._v(\"啊？不是吧，在vue中，不能使用index作为key呢？使用index作为key又好理解又方便，为什么不能使用呢？看文章就知道啦~.\")]),s._v(\" \"),n(\"h2\",{attrs:{id:\"一、key的作用是什么\"}},[n(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#一、key的作用是什么\"}},[s._v(\"#\")]),s._v(\" 一、key的作用是什么？\")]),s._v(\" \"),n(\"p\",[s._v(\"key的作用众所周知，看一个demo就知道：\")]),s._v(\" \"),n(\"div\",{staticClass:\"language- line-numbers-mode\"},[n(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[n(\"code\",[s._v('<script src=\"https://cdn.jsdelivr.net/npm/vue@2/dist/vue.js\"><\\/script>\\n<body>\\n    <ul id=\"app\">\\n        <li v-for=\"(item,index) in list\" :key=\"index\">{{item}}</li>\\n    </ul>\\n​\\n    <script>\\n        new Vue({\\n            el: \\'#app\\',\\n            data() {\\n                return {\\n                    list: [1, 2, 3]\\n                }\\n            }\\n        })\\n    <\\/script>\\n</body> \\n')])]),s._v(\" \"),n(\"div\",{staticClass:\"line-numbers-wrapper\"},[n(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"2\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"3\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"4\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"5\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"6\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"7\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"8\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"9\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"10\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"11\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"12\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"13\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"14\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"15\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"16\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"17\")]),n(\"br\")])]),n(\"p\",[n(\"img\",{attrs:{src:\"https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/34545965a5ff460886335d516efc9f0f~tplv-k3u1fbpfcp-watermark.image?\",alt:\"image-20220924222650595.png\"}})]),s._v(\" \"),n(\"p\",[s._v(\"在vue中key可以没有，没有也可以运行并且不会报错，但是建议加上key。\")]),s._v(\" \"),n(\"p\",[s._v(\"另外，我们必须知道，vue中key运用的地方------配合v-for使用。\"),n(\"strong\",[s._v(\"key是vue中虚拟dom标记的唯一标识，通过这个key，diff算法能更加准确和快捷。不使用key的情况下，因为vue的就地更新会选择复用节点，之前的状态被保存，可能会产生一系列的bug\")]),s._v(\"。另外，key的唯一性可以被map数据结构充分利用，时间复杂度仅为o（1）。\")]),s._v(\" \"),n(\"p\",[s._v(\"简单来说，key是唯一标识，为了让diff算法更准确的找到需要被对比的两个节点。\")]),s._v(\" \"),n(\"h2\",{attrs:{id:\"二、什么是虚拟dom\"}},[n(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#二、什么是虚拟dom\"}},[s._v(\"#\")]),s._v(\" 二、什么是虚拟DOM？\")]),s._v(\" \"),n(\"p\",[s._v(\"虚拟DOM结构就是一个对象而已，其中描述了每一层容器的特征。在beroreCreated执行的时候，DOM树并没有生成。\")]),s._v(\" \"),n(\"p\",[s._v(\"虚拟DOM光说肯定是不可理解的，那我们就用代码说话：\")]),s._v(\" \"),n(\"div\",{staticClass:\"language- line-numbers-mode\"},[n(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[n(\"code\",[s._v('<script src=\"https://cdn.jsdelivr.net/npm/vue@2/dist/vue.js\"><\\/script>\\n<body>\\n        <div id=\"app\">\\n            <ul>\\n                <item v-for=\"(num,index) in list\" :key=\"index\":num=\"num\":class=`item${num}`></item>\\n            </ul>\\n            <button @click=\"change\">change</button>\\n        </div>\\n​\\n        <script>\\n            new Vue({\\n                el: \\'#app\\',\\n                data() {\\n                    return {\\n                        list: [1, 2, 3]\\n                    }\\n                },\\n                methods: {\\n                    change() {\\n                        this.list.reverse()\\n                    }\\n                },\\n                //也可以使用原生JS添加DOM结构，不考虑性能的时候\\n                components: {\\n                    item: {\\n                        props: [\\'num\\'],\\n                        template: `<div>{{num}}</div>`,\\n                        name: \\'child\\'\\n                    }\\n                }\\n            })\\n            \\n            \\n            // let ul = document.getElementById(\\'app\\');\\n            // for (let i = 1; i <= 3; i++) {\\n            //  let li = document.createElement(\\'li\\');\\n            //  li.innerHTML = i;\\n            //  ul.appendChild(li);\\n            // }\\n        <\\/script>\\n    </body>\\n')])]),s._v(\" \"),n(\"div\",{staticClass:\"line-numbers-wrapper\"},[n(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"2\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"3\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"4\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"5\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"6\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"7\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"8\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"9\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"10\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"11\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"12\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"13\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"14\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"15\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"16\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"17\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"18\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"19\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"20\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"21\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"22\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"23\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"24\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"25\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"26\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"27\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"28\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"29\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"30\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"31\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"32\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"33\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"34\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"35\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"36\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"37\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"38\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"39\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"40\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"41\")]),n(\"br\")])]),n(\"p\",[n(\"em\",[s._v(\"先生成虚拟DOM结构，而不是编译：\")])]),s._v(\" \"),n(\"div\",{staticClass:\"language- line-numbers-mode\"},[n(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[n(\"code\",[s._v(\"vnode = {\\n    tag: 'ul',\\n    children: [\\n        {\\n            tag: 'li',\\n                children: [{\\n                    vnode: {\\n                        text: '1'\\n                    }\\n                }]\\n        },\\n        {\\n            tag: 'li',\\n                children: [{\\n                    vnode: {\\n                        text: '2'\\n                    }\\n                }]\\n        },\\n        {\\n            tag: 'li',\\n                children: [{\\n                    vnode: {\\n                        text: '3'\\n                    }\\n                }]\\n        },\\n    ]\\n}\\n\")])]),s._v(\" \"),n(\"div\",{staticClass:\"line-numbers-wrapper\"},[n(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"2\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"3\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"4\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"5\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"6\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"7\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"8\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"9\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"10\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"11\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"12\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"13\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"14\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"15\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"16\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"17\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"18\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"19\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"20\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"21\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"22\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"23\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"24\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"25\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"26\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"27\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"28\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"29\")]),n(\"br\")])]),n(\"p\",[n(\"em\",[s._v(\"再将html编写成真实的DOM结构：\")])]),s._v(\" \"),n(\"div\",{staticClass:\"language- line-numbers-mode\"},[n(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[n(\"code\",[s._v(\"再编译成真实DOM结构\\n    <li>1</li>\\n    <li>2</li>\\n    <li>3</li>\\n\")])]),s._v(\" \"),n(\"div\",{staticClass:\"line-numbers-wrapper\"},[n(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"2\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"3\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"4\")]),n(\"br\")])]),n(\"p\",[n(\"code\",[s._v(\"虚拟DOM存在的意义就是，减少真实DOM结构的操作，对于浏览器来说，减少开销，提高性能\")]),s._v(\"。\")]),s._v(\" \"),n(\"h2\",{attrs:{id:\"三、什么是diff算法\"}},[n(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#三、什么是diff算法\"}},[s._v(\"#\")]),s._v(\" 三、什么是diff算法?\")]),s._v(\" \"),n(\"p\",[s._v(\"只要数据源发生变化，就一定会触发watcher观察者函数（Object。defineProperty（））的回调函数，去驱动视图更新，(加_是为了表明这是vue自带的方法)\")]),s._v(\" \"),n(\"blockquote\",[n(\"p\",[s._v(\"回调：\")]),s._v(\" \"),n(\"div\",{staticClass:\"language- extra-class\"},[n(\"pre\",[n(\"code\",[s._v(\"vm._update(vm._render()),\\n _render会生成vnode\\n _update会拿着vnoe去__patch__去查找不同\\n __patch__中启动的就是diff算法\\n\")])])])]),s._v(\" \"),n(\"div\",{staticClass:\"language- line-numbers-mode\"},[n(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[n(\"code\",[s._v('<script src=\"https://cdn.jsdelivr.net/npm/vue@2/dist/vue.js\"><\\/script>\\n<body>\\n    <div id=\"app\">\\n        <ul>\\n            <item v-for=\"(item,index) in list\" :key=\"item.id\" :num=\"item.num\" :class=`item${item.num}`></item>\\n    </ul>\\n    <button @click=\"change\">change</button>\\n</div >\\n    <script>\\n        new Vue({\\n            el: \\'#app\\',\\n        data() {\\n            return {\\n            list: [1, 2, 3]\\n        },\\n        methods: {\\n            change() {\\n            this.list.reverse()\\n        }\\n        },\\n        components: {\\n            item: {\\n            props: [\\'num\\'],\\n        template: `<div>{{ num }}</div>`,\\n        name: \\'child\\'\\n            }\\n        }\\n    })\\n    <\\/script>\\n</body >\\n')])]),s._v(\" \"),n(\"div\",{staticClass:\"line-numbers-wrapper\"},[n(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"2\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"3\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"4\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"5\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"6\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"7\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"8\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"9\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"10\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"11\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"12\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"13\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"14\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"15\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"16\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"17\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"18\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"19\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"20\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"21\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"22\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"23\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"24\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"25\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"26\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"27\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"28\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"29\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"30\")]),n(\"br\")])]),n(\"p\",[s._v(\"当点击按钮change以后，list反转变为：list:[3,2,1]，diff算法会根据DOM树，从上到下，从左到右判断值是否更新。问题是，为什么diff就知道谁跟谁去进行比对呢？这就是key的作用了，key是唯一标识符，diff算法会根据key去比对。\")]),s._v(\" \"),n(\"p\",[n(\"img\",{attrs:{src:\"https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/423f52eefa184b1f8e189d14c8888742~tplv-k3u1fbpfcp-watermark.image?\",alt:\"image-20220924231614758.png\"}})]),s._v(\" \"),n(\"h2\",{attrs:{id:\"四、为什么不能用index作为key\"}},[n(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#四、为什么不能用index作为key\"}},[s._v(\"#\")]),s._v(\" 四、为什么不能用index作为key？\")]),s._v(\" \"),n(\"p\",[s._v(\"基于前三者的知识基础，我们才能更好地理解，为什么不能用index作为key？这里将通过三个demo来展示：\")]),s._v(\" \"),n(\"h3\",{attrs:{id:\"_1-index不能作为key-情景一\"}},[n(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#_1-index不能作为key-情景一\"}},[s._v(\"#\")]),s._v(\" （1）index不能作为key--情景一\")]),s._v(\" \"),n(\"p\",[s._v(\"demo1：\")]),s._v(\" \"),n(\"div\",{staticClass:\"language- line-numbers-mode\"},[n(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[n(\"code\",[s._v('    <script src=\"https://cdn.jsdelivr.net/npm/vue@2/dist/vue.js\"><\\/script>\\n    <body>\\n        <div id=\"app\">\\n            <ul>\\n                <item v-for=\"(num,index) in list\" :key=\"index\" :num=\"num\" :class=`item${num}`></item>\\n            </ul>\\n            <button @click=\"change\">change</button>\\n        </div>\\n        <script>\\n            new Vue({\\n                el: \\'#app\\',\\n                data() {\\n                    return {\\n                        list: [1, 2, 3]\\n                    }\\n                },\\n                methods: {\\n                    change() {\\n                        this.list.reverse()\\n                    }\\n                },\\n                components: {\\n                    item: {\\n                        props: [\\'num\\'],\\n                        template: `<div>{{num}}</div>`,\\n                        name: \\'child\\'\\n                    }\\n                }\\n            })\\n            \\n        <\\/script>\\n    </body>\\n')])]),s._v(\" \"),n(\"div\",{staticClass:\"line-numbers-wrapper\"},[n(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"2\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"3\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"4\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"5\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"6\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"7\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"8\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"9\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"10\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"11\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"12\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"13\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"14\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"15\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"16\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"17\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"18\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"19\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"20\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"21\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"22\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"23\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"24\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"25\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"26\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"27\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"28\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"29\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"30\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"31\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"32\")]),n(\"br\")])]),n(\"p\",[s._v(\"demo2：\")]),s._v(\" \"),n(\"div\",{staticClass:\"language- line-numbers-mode\"},[n(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[n(\"code\",[s._v('<script src=\"https://cdn.jsdelivr.net/npm/vue@2/dist/vue.js\"><\\/script>\\n<body>\\n    <div id=\"app\">\\n        <ul>\\n            <item v-for=\"(item,index) in list\" :key=\"item.id\" :num=\"item.num\" :class=`item${item.num}`></item>\\n        </ul>\\n        <button @click=\"change\">change</button>\\n    </div>\\n    <script>\\n        new Vue({\\n            el: \\'#app\\',\\n            data() {\\n                return {\\n                    list: [{\\n                        id: 0,\\n                        num: 1\\n                    }, {\\n                        id: 1,\\n                        num: 2\\n                    }, {\\n                        id: 2,\\n                        num: 3\\n                    }]\\n                }\\n            },\\n            methods: {\\n                change() {\\n                    this.list.reverse()\\n                }\\n            },\\n            components: {\\n                item: {\\n                    props: [\\'num\\'],\\n                    template: `<div>{{num}}</div>`,\\n                    name: \\'child\\'\\n                }\\n            }\\n        })\\n    <\\/script>\\n</body>\\n')])]),s._v(\" \"),n(\"div\",{staticClass:\"line-numbers-wrapper\"},[n(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"2\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"3\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"4\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"5\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"6\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"7\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"8\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"9\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"10\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"11\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"12\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"13\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"14\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"15\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"16\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"17\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"18\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"19\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"20\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"21\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"22\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"23\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"24\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"25\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"26\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"27\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"28\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"29\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"30\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"31\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"32\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"33\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"34\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"35\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"36\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"37\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"38\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"39\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"40\")]),n(\"br\")])]),n(\"p\",[s._v(\"demo1与demo2的区别在于，key值不一样，demo1是index作为key，而demo2是list中的id作为key。需要注意的是，当我们点击change按钮以后，注意观察代码是如何变化的：\")]),s._v(\" \"),n(\"p\",[s._v(\"demo1点击前后变化：\")]),s._v(\" \"),n(\"p\",[n(\"img\",{attrs:{src:\"https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/fe8886bfeec743b3863e94f813f339b6~tplv-k3u1fbpfcp-watermark.image?\",alt:\"image-20220924233004070.png\"}}),s._v(\" \"),n(\"img\",{attrs:{src:\"https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/0e600fe3c14e41dfb8aab48077e5b0d5~tplv-k3u1fbpfcp-watermark.image?\",alt:\"image-20220924233030841.png\"}})]),s._v(\" \"),n(\"p\",[s._v(\"demo2点击前后变化：\")]),s._v(\" \"),n(\"p\",[n(\"img\",{attrs:{src:\"https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/23705699717648f8afa0d489836c7610~tplv-k3u1fbpfcp-watermark.image?\",alt:\"image-20220924232758726.png\"}}),s._v(\" \"),n(\"img\",{attrs:{src:\"https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/456d190722b5420b82f1caae831a05c4~tplv-k3u1fbpfcp-watermark.image?\",alt:\"image-20220924232837419.png\"}})]),s._v(\" \"),n(\"p\",[s._v(\"表面上，demo1只是调换了item1和item3的位置，点击后也是就改变了item1和item3；而demo2三个都改变了。这时有人就会觉得使用index作为key改动DOM结构还更小，岂不是更好？\")]),s._v(\" \"),n(\"p\",[s._v(\"实际上，眼见不一定为实。我们看看真实的样子：\")]),s._v(\" \"),n(\"p\",[s._v(\"demo1的改变前后对比：\")]),s._v(\" \"),n(\"p\",[n(\"img\",{attrs:{src:\"https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/56475bff7b8e4dff87be21930b0444fb~tplv-k3u1fbpfcp-watermark.image?\",alt:\"image-20220924233734875.png\"}})]),s._v(\" \"),n(\"p\",[s._v(\"demo2改变前后对比：\")]),s._v(\" \"),n(\"p\",[n(\"img\",{attrs:{src:\"https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/ccda09ef03694c45b87249ef97723889~tplv-k3u1fbpfcp-watermark.image?\",alt:\"image-20220924234018713.png\"}})]),s._v(\" \"),n(\"p\",[s._v(\"是不是震惊了！！！\"),n(\"em\",[s._v(\"demo2的list实际上的key和num一一对应着，并没有改变\")]),s._v(\"，只是顺序不一样了。而demo1还改变了两个值。所以，这就是不能使用index作为key的原因之一了。\")]),s._v(\" \"),n(\"blockquote\",[n(\"p\",[s._v(\"使用index作为key，会导致diff中的优化失效（降低了复用性，违背了虚拟DOM的初衷）。原本可以复用的东西，不能被复用，徒然增加了性能开销，浪费性能\")])]),s._v(\" \"),n(\"h3\",{attrs:{id:\"_2-index不能作为key-情景二\"}},[n(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#_2-index不能作为key-情景二\"}},[s._v(\"#\")]),s._v(\" （2）index不能作为key---情景二\")]),s._v(\" \"),n(\"p\",[s._v(\"接下来看看demo3，demo3将会淋漓尽致的展现index作为key的bug：\")]),s._v(\" \"),n(\"div\",{staticClass:\"language- line-numbers-mode\"},[n(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[n(\"code\",[s._v('<script src=\"https://cdn.jsdelivr.net/npm/vue@2/dist/vue.js\"><\\/script>\\n    <body>\\n        <div id=\"app\">\\n            <ul>\\n                <item v-for=\"(item,index) in student\" :key=\"index\"></item>\\n                //<item v-for=\"(item,index) in list\" :key=\"item.id\"></item>\\n            </ul>\\n            \\n            <button @click=\"change\">change</button>\\n        </div>\\n        <script>\\n            new Vue({\\n                el: \\'#app\\',\\n                data() {\\n                    return {\\n                        list: [{\\n                            id: 0,\\n                            num: 1\\n                        }, {\\n                            id: 1,\\n                            num: 2\\n                        }, {\\n                            id: 2,\\n                            num: 3\\n                        }],\\n                        student: [1, 2, 3]\\n                    }\\n                },\\n                methods: {\\n                    //删除数据\\n                    change() {\\n                        this.student.splice(0, 1)\\n                        //this.list.splice(0, 1)\\n                    }\\n                },\\n                components: {\\n                    item: {\\n                        template: `<div>{{Math.random()}}</div>`,\\n                    }\\n                }\\n            })\\n        <\\/script>\\n    </body>\\n')])]),s._v(\" \"),n(\"div\",{staticClass:\"line-numbers-wrapper\"},[n(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"2\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"3\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"4\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"5\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"6\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"7\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"8\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"9\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"10\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"11\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"12\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"13\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"14\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"15\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"16\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"17\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"18\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"19\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"20\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"21\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"22\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"23\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"24\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"25\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"26\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"27\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"28\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"29\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"30\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"31\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"32\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"33\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"34\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"35\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"36\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"37\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"38\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"39\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"40\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"41\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"42\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"43\")]),n(\"br\")])]),n(\"p\",[s._v(\"当删除的时候，又会发生什么意想不到事情呢？\")]),s._v(\" \"),n(\"p\",[n(\"img\",{attrs:{src:\"https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/88c116bb97574b01b9ed0994c07b982a~tplv-k3u1fbpfcp-watermark.image?\",alt:\"image-20220925120400232.png\"}}),s._v(\" \"),n(\"img\",{attrs:{src:\"https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/cf5b72ee1ff64985855b1f2073149238~tplv-k3u1fbpfcp-watermark.image?\",alt:\"image-20220925120419598.png\"}})]),s._v(\" \"),n(\"p\",[s._v(\"右图是删除之后的结果，惊讶的发现，我们\"),n(\"em\",[s._v(\"删除的明明是第一个数据，而页面展示是删除了第三个数据\")]),s._v(\"。小小的脑袋真的会有大大的疑问。但是通过虚拟DOM，你就会恍然大悟了。\")]),s._v(\" \"),n(\"p\",[n(\"strong\",[s._v(\"当用index作为key时，因为diff算法会就地更新，会复用key:0的这个节点，比对的时候，key:0的节点存在，则比对key:1，也存在，而多出了key:2,则会将其删除。\")])]),s._v(\" \"),n(\"p\",[n(\"img\",{attrs:{src:\"https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/7b50235c32ad4b5f85d119c774513535~tplv-k3u1fbpfcp-watermark.image?\",alt:\"image-20220925121112842.png\"}})]),s._v(\" \"),n(\"blockquote\",[n(\"p\",[s._v(\"使用index作为key时，在删除数据时，因为vue不会深入地区对比子组件的文本内容，所以会错误移除VDOM中的节点（index的值是不固定的）。\")])]),s._v(\" \"),n(\"p\",[s._v(\"这个例子，文本内容使用的是随机数，所以数据对不上不必太在意。另外，既然index的值不固定，不能作为key，那么扩展一下，可不可以使用随机数作为key呢？答案自然是不能够。因为key值无论是删除还是反转，根本就不能找到相同的key，diff算法就毫无意义了，压根没有复用性可言。\")]),s._v(\" \"),n(\"p\",[s._v(\"在这个demo3里，数据源放了list这个数据，可言尝试循环它，来对比index作为key的结果，将会更加明显哦。\")])])}),[],!1,null,null,null);n.default=t.exports}}]);","extractedComments":[]}