{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[41],{451:function(s,n,e){\"use strict\";e.r(n);var a=e(1),t=Object(a.a)({},(function(){var s=this,n=s._self._c;return n(\"ContentSlotsDistributor\",{attrs:{\"slot-key\":s.$parent.slotKey}},[n(\"p\",[s._v(\"持续创作，加速成长！这是我参与「掘金日新计划 · 10 月更文挑战」的第8天，\"),n(\"a\",{attrs:{href:\"https://juejin.cn/post/7147654075599978532\",title:\"https://juejin.cn/post/7147654075599978532\",target:\"_blank\",rel:\"noopener noreferrer\"}},[s._v(\"点击查看活动详情\"),n(\"OutboundLink\")],1)]),s._v(\" \"),n(\"h2\",{attrs:{id:\"一、什么是响应式\"}},[n(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#一、什么是响应式\"}},[s._v(\"#\")]),s._v(\" 一、什么是响应式？\")]),s._v(\" \"),n(\"p\",[s._v(\"Vue 最标志性的功能就是其低侵入性的响应式系统。组件状态都是由响应式的 JavaScript 对象组成的。\"),n(\"em\",[s._v(\"当更改数据时，会驱动视图更新\")]),s._v(\"。举个简单的例子：\")]),s._v(\" \"),n(\"div\",{staticClass:\"language- line-numbers-mode\"},[n(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[n(\"code\",[s._v('​\\n    <div id=\"app\">\\n        <p class=\"content\">result1:{{result1}}</p>\\n        <p class=\"content\">result2:{{result2}}</p>\\n    </div>\\n​\\n    <script>\\n        new Vue({\\n            el:\\'#app\\',\\n            data(){\\n                return{\\n                    num1:1,\\n                    num2:2,\\n                    //设置result1和result2的初始值恰好是num1+num2\\n                    result1:3,\\n                    result2:3\\n                }\\n            },\\n            created(){\\n                //改变num1的值\\n                this.num1=2\\n                this.result2=this.num1+this.num2\\n            }\\n        })\\n    <\\/script>\\n​\\n')])]),s._v(\" \"),n(\"div\",{staticClass:\"line-numbers-wrapper\"},[n(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"2\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"3\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"4\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"5\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"6\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"7\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"8\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"9\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"10\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"11\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"12\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"13\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"14\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"15\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"16\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"17\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"18\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"19\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"20\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"21\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"22\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"23\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"24\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"25\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"26\")]),n(\"br\")])]),n(\"p\",[s._v(\"当改变num1值之前，页面上应该resulr1和result2的值都是3，而当改变num1的值以后，会触发视图更新，页面上result1的值是3，result2的值是4。数据改变，视图也会随之更新。\")]),s._v(\" \"),n(\"p\",[s._v(\"而原生JS一个值改变，是不会驱动视图更新的，例如：\")]),s._v(\" \"),n(\"div\",{staticClass:\"language- line-numbers-mode\"},[n(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[n(\"code\",[s._v(\"let num1 = 1\\nlet num2 = 2\\nlet result = num1 + num2\\nconsole.log(result) // 3\\nnum1 = 2\\nconsole.log(result) // 3，没有改变\\n\")])]),s._v(\" \"),n(\"div\",{staticClass:\"line-numbers-wrapper\"},[n(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"2\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"3\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"4\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"5\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"6\")]),n(\"br\")])]),n(\"h2\",{attrs:{id:\"二、vue2响应式原理\"}},[n(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#二、vue2响应式原理\"}},[s._v(\"#\")]),s._v(\" 二、vue2响应式原理？\")]),s._v(\" \"),n(\"h3\",{attrs:{id:\"_1、响应式api\"}},[n(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#_1、响应式api\"}},[s._v(\"#\")]),s._v(\" 1、响应式API\")]),s._v(\" \"),n(\"p\",[n(\"strong\",[n(\"code\",[s._v(\"Object.defineProperty()\")])]),s._v(\" 方法会直接在一个对象上定义一个新属性，或者修改一个对象的现有属性，并返回此对象。\")]),s._v(\" \"),n(\"div\",{staticClass:\"language- line-numbers-mode\"},[n(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[n(\"code\",[s._v(\"Object.defineProperty(obj,prop,descriptor)接收三个参数，\\n\\nobj:要定义属性的目标对象；\\n\\nprop：要定义或修改属性的名称或Symbol；\\n\\ndescriptor：要定义或修改的属性描述符；返回值是被传递给函数的对象。\\n\")])]),s._v(\" \"),n(\"div\",{staticClass:\"line-numbers-wrapper\"},[n(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"2\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"3\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"4\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"5\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"6\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"7\")]),n(\"br\")])]),n(\"p\",[n(\"strong\",[s._v(\"属性描述符包括\")]),s._v(\"：\")]),s._v(\" \"),n(\"ul\",[n(\"li\",[n(\"em\",[s._v(\"数据描述符\")]),s._v(\"：具有值的属性，该值可以是可写的（ writable: true），也可以是不可写的（ writable: false）\")])]),s._v(\" \"),n(\"ul\",[n(\"li\",[n(\"p\",[n(\"em\",[s._v(\"存取描述符\")]),s._v(\"：由getter函数和setter函数所描述的属性。一个描述符只能是数据描述符或者存取描述符，不能同时是两者。\")]),s._v(\" \"),n(\"p\",[s._v(\"属性描述符描述的都是对象，在使用Object.defineProperty()定义属性时候有一些可选的键值。如下：\")])])]),s._v(\" \"),n(\"ul\",[n(\"li\",[n(\"p\",[n(\"em\",[s._v(\"configurable(可配置的)\")]),s._v(\"：当设置值为true的时候，表示该属性的描述符可以被改变，同时该属性也能从对应的对象上删除。默认为false。\")])]),s._v(\" \"),n(\"li\",[n(\"p\",[n(\"em\",[s._v(\"enumerable(可枚举的)\")]),s._v(\"：当设置值为true时，表示该属性是可枚举属性。默认为false。\")]),s._v(\" \"),n(\"p\",[n(\"strong\",[s._v(\"数据描述符的可选键值\")]),s._v(\"：\")])]),s._v(\" \"),n(\"li\",[n(\"p\",[n(\"em\",[s._v(\"value(属性值)\")]),s._v(\"：可以设置任何有效的Javascript值（数值，对象，函数等），默认为undefined。\")]),s._v(\" \"),n(\"p\",[n(\"em\",[s._v(\"writable(可写的)\")]),s._v(\"：当设置的值为true时，代表value可以被重新赋值。默认为false。\")])])]),s._v(\" \"),n(\"p\",[n(\"strong\",[s._v(\"存取描述符的可选键值\")]),s._v(\"：\")]),s._v(\" \"),n(\"p\",[n(\"em\",[s._v(\"set\")]),s._v(\"：属性的setter函数，若没有setter，则为undefined。当属性值被修改时，会调用该函数。写法：set(newValue){oldValue=newValue}。默认为undefined。\")]),s._v(\" \"),n(\"p\",[n(\"em\",[s._v(\"get\")]),s._v(\"：属性的getter函数，若没有getter，则为undefined。当访问属性的时候，会调用该函数。执行的时候不需要传入任何参数，但是会传入this对象。该函数的返回值会被用作属性的值。写法：get(){return oldValue}。默认为undefined。\")]),s._v(\" \"),n(\"p\",[s._v(\"另外，\"),n(\"strong\",[s._v(\"defineProperty应当直接在Object构造器对象上调用此方法，而不是在任意一个Object类型的实例身上调用\")]),s._v(\"。\")]),s._v(\" \"),n(\"p\",[s._v(\"举个例子：\")]),s._v(\" \"),n(\"div\",{staticClass:\"language- line-numbers-mode\"},[n(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[n(\"code\",[s._v(\"const obj_origin = {}\\nObject.defineProperty(obj_origin, 'name', { //劫持对象obj_origin\\n  value: '秦霄贤',\\n  writable: false\\n})\\nobj_origin.name = '哈尼~'//非严格模式下\\nconsole.log(obj_origin.name); //秦霄贤\\n​\\n\")])]),s._v(\" \"),n(\"div\",{staticClass:\"line-numbers-wrapper\"},[n(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"2\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"3\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"4\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"5\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"6\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"7\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"8\")]),n(\"br\")])]),n(\"h3\",{attrs:{id:\"_2、响应式原理\"}},[n(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#_2、响应式原理\"}},[s._v(\"#\")]),s._v(\" 2、响应式原理\")]),s._v(\" \"),n(\"div\",{staticClass:\"language- line-numbers-mode\"},[n(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[n(\"code\",[s._v(\"// vue2.0 响应式原理--数据变了  可以更新视图\\n​\\nfunction type(data) {\\n    return Object.prototype.toString.call(data).slice(8, -1) // 'Number'\\n  }\\n  \\n  let oldArrayPrototype = Array.prototype\\n  let proto = Object.create(oldArrayPrototype) // 继承\\n  \\n  // pushxxxx  函数劫持， 把函数重写 \\n  Array.from(['push', 'shift', 'unshift', 'pop']).forEach(method => {\\n    proto[method] = function() { \\n      oldArrayPrototype[method].call(this, ...arguments)\\n      updateView()\\n    }\\n  })\\n  \\n// observer函数专门用于劫持数据\\n  function observer(target) { \\n    if (typeof target !== 'object' || typeof target == null) { // 崩\\n      return target\\n    }\\n  \\n    if (Array.isArray(target)) {\\n      // target.__proto__ = proto\\n      Object.setPrototypeOf(target, proto)\\n    }\\n  \\n    for (let key in target) {\\n      defineReactive(target, key, target[key])\\n    }\\n  }\\n  \\n  // 响应式\\n  function defineReactive(target, key, value) {\\n    observer(value)//这个递归是默认执行的\\n  // Object.defineProperty () 可以重新定义属性 给属性安插 getter setter 方法\\n    Object.defineProperty(target, key, {\\n      get() {\\n        return value\\n      },\\n      set(newVal) {\\n        if (newVal !== value) {\\n          value = newVal\\n          updateView()\\n        }\\n      }\\n    })\\n  }\\n  \\n  \\n  function updateView() {\\n    console.log('更新视图');\\n  }\\n  \\nlet data = {\\n  name: 'hunny',\\n  age: {\\n    n: 19\\n  },\\n  hobby: ['reading']\\n}\\nobserver(data)\\n​\\n// （1）当改变属性是基本数据类型的时，不触发更新视图\\ndata.name = 'hunny'\\n// （2）但改变属性是对象类型的值时，触发更新视图\\ndata.age.n = 101\\ndata.age = {\\n  n: 102\\n}\\n// （3）当属性不存在时，不触发更新视图\\ndata.sex = 'boy'\\n​\\n// （4）当改变数组类型，触发更新视图\\nArray.prototype.push = function() {}\\ndata.hobby.push('singing')\\n​\\n// （5）当改变数组原本的长度，数组长度会改变，会放两个empty,占位符，但是不触发更新视图\\ndata.hobby.length = 5\\nconsole.log(data.hobby.length); //5，实际上是2\\n\")])]),s._v(\" \"),n(\"div\",{staticClass:\"line-numbers-wrapper\"},[n(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"2\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"3\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"4\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"5\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"6\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"7\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"8\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"9\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"10\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"11\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"12\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"13\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"14\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"15\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"16\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"17\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"18\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"19\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"20\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"21\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"22\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"23\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"24\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"25\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"26\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"27\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"28\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"29\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"30\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"31\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"32\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"33\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"34\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"35\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"36\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"37\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"38\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"39\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"40\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"41\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"42\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"43\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"44\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"45\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"46\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"47\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"48\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"49\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"50\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"51\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"52\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"53\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"54\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"55\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"56\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"57\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"58\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"59\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"60\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"61\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"62\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"63\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"64\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"65\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"66\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"67\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"68\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"69\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"70\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"71\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"72\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"73\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"74\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"75\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"76\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"77\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"78\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"79\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"80\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"81\")]),n(\"br\")])]),n(\"h3\",{attrs:{id:\"_3、缺点\"}},[n(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#_3、缺点\"}},[s._v(\"#\")]),s._v(\" 3、缺点\")]),s._v(\" \"),n(\"p\",[s._v(\"（1）vue2 对象中不存在的属性不能被拦截， Object.defineProperty()只能劫持对象\")]),s._v(\" \"),n(\"p\",[s._v(\"（2）数组改变length属性不会驱动视图更新，虽然长度被改变了。\")]),s._v(\" \"),n(\"p\",[s._v(\"（3）当对象是一个嵌套的对象的时候，需要使用递归进行深度监听，vue2当中 递归是默认执行的\")]),s._v(\" \"),n(\"p\",[s._v(\"（4）vue2中无法监听到对象的增删，所以vue2还补充了Vue.$set()，Vue.$delete()等其他方法进行弥补。\")]),s._v(\" \"),n(\"p\",[s._v(\"（5）对象新增的属性没有响应式 数组的部分操作没有响应式。数组的一些方法会改变数组，在vue2中被重写。\")]),s._v(\" \"),n(\"h2\",{attrs:{id:\"三、vue3响应式原理\"}},[n(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#三、vue3响应式原理\"}},[s._v(\"#\")]),s._v(\" 三、vue3响应式原理？\")]),s._v(\" \"),n(\"h3\",{attrs:{id:\"_1、响应式api-2\"}},[n(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#_1、响应式api-2\"}},[s._v(\"#\")]),s._v(\" 1、响应式API\")]),s._v(\" \"),n(\"p\",[n(\"strong\",[s._v(\"Proxy\")]),s._v(\" 对象用于创建一个对象的代理，从而实现基本操作的拦截和自定义（如属性查找、赋值、枚举、函数调用等）。const myProxy=new Proxy(target,handler)。target：被Proxy代理虚拟化的目标对象（整个对象），可以是任何类型的对象，包括原生数组、函数，另一个代理等；handler：一般以函数作为属性的对象，各睡醒的函数分别定义了在执行各种操作时代理的myProxy的行为。\")]),s._v(\" \"),n(\"p\",[n(\"strong\",[s._v(\"Proxy的内置方法\")]),s._v(\"：\")]),s._v(\" \"),n(\"ul\",[n(\"li\",[s._v(\"Proxy.revocable()：创建一个可撤销的Proxy对象\")])]),s._v(\" \"),n(\"p\",[s._v(\"handler独享是一个容纳一批特定属性的占位符对象。它包含Proxy的各个捕获器。\")]),s._v(\" \"),n(\"p\",[n(\"strong\",[s._v(\"handler对象上的方法\")]),s._v(\"：(以实现响应式原理用到的方法进行列举)\")]),s._v(\" \"),n(\"ul\",[n(\"li\",[n(\"p\",[s._v(\"handler.has()：针对in操作符的代理方法\")])]),s._v(\" \"),n(\"li\",[n(\"p\",[s._v(\"handler.set()：设置属性值操作的捕获器\")])]),s._v(\" \"),n(\"li\",[n(\"p\",[s._v(\"handler.get()：拦截对象的读取属性的操作\")])]),s._v(\" \"),n(\"li\",[n(\"p\",[s._v(\"handler.deleteProperty()：拦截对对象属性的删除操作\")]),s._v(\" \"),n(\"p\",[s._v(\"举个例子：\")])])]),s._v(\" \"),n(\"div\",{staticClass:\"language- line-numbers-mode\"},[n(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[n(\"code\",[s._v(\"const obj_origin = {}\\nconst handler = {\\n  get(obj, name) {\\n    return name in obj ? obj[name] : '嘻哈'\\n  }\\n}\\nconst myProxy = new Proxy(obj_origin, handler)\\nmyProxy.name = '嗯哼~'\\nmyProxy.age = undefined\\n​\\nconsole.log(myProxy.name, myProxy.age); //嗯哼~ undefined\\nconsole.log(myProxy.gender);//嘻哈\\n\")])]),s._v(\" \"),n(\"div\",{staticClass:\"line-numbers-wrapper\"},[n(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"2\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"3\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"4\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"5\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"6\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"7\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"8\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"9\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"10\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"11\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"12\")]),n(\"br\")])]),n(\"h3\",{attrs:{id:\"_2、响应式原理-2\"}},[n(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#_2、响应式原理-2\"}},[s._v(\"#\")]),s._v(\" 2、响应式原理\")]),s._v(\" \"),n(\"div\",{staticClass:\"language- line-numbers-mode\"},[n(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[n(\"code\",[s._v(\"// vue3 响应式原理\\nlet toProxy = new WeakMap() // 弱引用映射表  存放原对象：代理过的对象\\nlet toRaw = new WeakMap()   // 代理过的对象：原对象\\n​\\n// 判断对象\\nfunction isObject(val) {\\n    return typeof val === 'object' && val !== null\\n}\\n​\\nfunction hasOwn(target, key) {\\n    return target.hasOwnProperty(key)\\n}\\n​\\n// 核心方法\\nfunction reactive(target) {\\n    return createReactiveObject(target)\\n}\\n​\\n// 创建响应式对象\\nfunction createReactiveObject(target) {\\n    if (!isObject(target)) {    // 原始类型，直接返回\\n        return target\\n    }\\n​\\n    let proxy = toProxy.get(target)\\n    if (proxy) {    // 代理过\\n        return proxy\\n    }\\n    if (toRaw.has(target)) {    // 防止多层代理\\n        return target\\n    }\\n​\\n    let baseHandler = {\\n        get(target, key, receiver) {\\n            // reflect对象上的方法与proxy上的方法一一对应\\n            let res = Reflect.get(target, key, receiver) // reflect 做反射\\n            return isObject(res) ? reactive(res) : res\\n        },\\n        set(target, key, value, receiver) { // [1,2,3,4]\\n            // 判断是新增属性还是修改属性\\n            let hadKey = hasOwn(target, key)\\n            let oldValue = target[key]\\n            let res = Reflect.set(target, key, value, receiver)\\n​\\n            if (!hadKey) {\\n                console.log('新增属性');\\n            } else if (oldValue !== value) {\\n                console.log('修改属性');\\n            }\\n            return res\\n        },\\n        deleteProperty(target, key) {\\n            let res = Reflect.deleteProperty(target, key)\\n            console.log('删除属性');\\n            return res\\n        }\\n    }\\n​\\n    let observed = new Proxy(target, baseHandler)\\n    toProxy.set(target, observed)\\n    toRaw.set(observed, target)\\n    return observed\\n}\\n​\\n// 数组\\nlet users = ['cat', 'dog', 'mice']\\nlet myProxy = reactive(users)\\n// （1）当给数组添加元素时，'新增属性'\\nmyProxy.push('fish')\\n​\\n// （2）当改变数组原本长度时，'修改属性'\\nmyProxy.length = 5\\n​\\n// （3）当进行多层代理时， 利用get读取时才代理\\nlet otherProxy = reactive({\\n  name: 'bird',\\n  food: {\\n    type: 'meat'\\n  },\\n  hobbies: ['flying', 'singing']\\n})\\n// 当修改基本类型的属性值，'修改属性'\\notherProxy.name = 'duck'\\n// 当删除基本类型的属性时，'删除属性'\\ndelete otherProxy.name\\nconsole.log(otherProxy.name); //undefined\\n​\\n// 当改变对象类型的属性时,'修改属性'\\notherProxy.food.type = 'leaves'\\nconsole.log(otherProxy.food.type); //leaves\\n​\\n// 被代理过的对象需要记录一下，不要再次代理了\\n// reactive(otherProxy)\\n\")])]),s._v(\" \"),n(\"div\",{staticClass:\"line-numbers-wrapper\"},[n(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"2\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"3\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"4\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"5\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"6\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"7\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"8\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"9\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"10\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"11\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"12\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"13\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"14\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"15\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"16\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"17\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"18\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"19\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"20\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"21\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"22\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"23\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"24\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"25\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"26\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"27\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"28\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"29\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"30\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"31\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"32\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"33\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"34\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"35\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"36\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"37\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"38\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"39\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"40\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"41\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"42\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"43\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"44\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"45\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"46\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"47\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"48\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"49\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"50\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"51\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"52\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"53\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"54\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"55\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"56\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"57\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"58\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"59\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"60\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"61\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"62\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"63\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"64\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"65\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"66\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"67\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"68\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"69\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"70\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"71\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"72\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"73\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"74\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"75\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"76\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"77\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"78\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"79\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"80\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"81\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"82\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"83\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"84\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"85\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"86\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"87\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"88\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"89\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"90\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"91\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"92\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"93\")]),n(\"br\")])]),n(\"h3\",{attrs:{id:\"_3、对比vue2\"}},[n(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#_3、对比vue2\"}},[s._v(\"#\")]),s._v(\" 3、对比vue2\")]),s._v(\" \"),n(\"p\",[s._v(\"（1）Proxy代理的对象是整个对象，而不是对象的某个特定的属性。\")]),s._v(\" \"),n(\"p\",[s._v(\"（2）代理之后操作的对象是实例对象，而不是原对象。\")]),s._v(\" \"),n(\"p\",[s._v(\"（3）vue3的响应式原理不需要递归，性能比较好。\")])])}),[],!1,null,null,null);n.default=t.exports}}]);","extractedComments":[]}