{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[46],{449:function(s,t,a){\"use strict\";a.r(t);var e=a(1),n=Object(e.a)({},(function(){var s=this,t=s._self._c;return t(\"ContentSlotsDistributor\",{attrs:{\"slot-key\":s.$parent.slotKey}},[t(\"hr\"),s._v(\" \"),t(\"h2\",{attrs:{id:\"highlight-a11y-darktheme-cyanosis\"}},[t(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#highlight-a11y-darktheme-cyanosis\"}},[s._v(\"#\")]),s._v(\" highlight: a11y-dark\\ntheme: cyanosis\")]),s._v(\" \"),t(\"p\",[t(\"em\",[t(\"strong\",[s._v(\"本文正在参加\"),t(\"a\",{attrs:{href:\"https://juejin.cn/post/7162096952883019783\",title:\"https://juejin.cn/post/7162096952883019783\",target:\"_blank\",rel:\"noopener noreferrer\"}},[s._v(\"「金石计划 . 瓜分6万现金大奖」\"),t(\"OutboundLink\")],1)])])]),s._v(\" \"),t(\"p\",[s._v(\"Web页面安全问题早就让人产生警觉感，想到安全首先想到的肯定是浏览器最基本最核心的安全策略--同源策略。简单概述一下：同源策略是指，若页面的源和页面运行过程中加载的源不一致时，出于安全考虑，浏览器会对跨域的资源访问进行一些限制。即协议+域名+端口三者相同，即使两个不同的域名指向同一个地址，也是非同源的。想象一下，页面没有安全策略的话，Web的世界会是怎样的？肯定有人经历过无意打开一个网站，全是广告弹窗或者骗人的信息等，类似于这样的情况，如果没有安全策略，Web的世界将是开放的，可以加载任意资源，如脚本，音频，视频，对于写论文报告的我，一开始觉得挺好的，不需要每次COPY都要登录注册或者付费。但是，这样的世界也是不安全的，坏处颇多：绝对自由导致页面行为无限制，如信息紊乱，无秩序，隐私信息荡然无存，对恶意网站束手无措...\")]),s._v(\" \"),t(\"p\",[s._v(\"想到这些，那还是有安全策略比较好，如果没有安全策略，那么网站会容易遭受XSS攻击、SQL注入攻击、URL篡改等，接下来进入正题：\")]),s._v(\" \"),t(\"h2\",{attrs:{id:\"一、什么是xss\"}},[t(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#一、什么是xss\"}},[s._v(\"#\")]),s._v(\" 一、什么是XSS？\")]),s._v(\" \"),t(\"h3\",{attrs:{id:\"_1-xss概念\"}},[t(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#_1-xss概念\"}},[s._v(\"#\")]),s._v(\" （1）XSS概念\")]),s._v(\" \"),t(\"p\",[s._v(\"XSS，即跨站脚本，\"),t(\"code\",[s._v(\"Cross Site Scripting\")]),s._v(\"，本来叫做CSS，但是为了和样式CSS区别，所以叫XSS。简单来说，XSS就是攻击者（或者黑客）想尽一切办法，绞尽脑汁往html文件中或者DOM中注入恶意脚本（执行的代码），从而用户在浏览器页面时利用注入的脚本对用户实施攻击。\")]),s._v(\" \"),t(\"p\",[s._v(\"XSS的重点不在于跨站，而在于执行的脚本或者代码，这是经常出现在Web页面的计算机安全漏洞。\")]),s._v(\" \"),t(\"h3\",{attrs:{id:\"_2-存储型xss\"}},[t(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#_2-存储型xss\"}},[s._v(\"#\")]),s._v(\" （2）存储型XSS\")]),s._v(\" \"),t(\"p\",[s._v(\"存储型XSS攻击是一种持久性的攻击，持久型就是攻击的脚本代码被服务端写⼊进\"),t(\"strong\",[s._v(\"数据库\")]),s._v(\"中，黑客事先将恶意的脚本代码植入到漏洞服务器中，只要受害者浏览包含此恶意脚本代码的页面，就会执行恶意代码。这意味着只要访问了这个页面的访客，都有可能会执行这段恶意脚本，正因如此，如果⽹站访问量很⼤的话，就会导致⼤量正常访问⻚⾯的⽤户都受到攻击。所以说存储型XSS攻击的危害会更大。此类攻击一般出现在网站留言、评论、博客日志等。\")]),s._v(\" \"),t(\"h3\",{attrs:{id:\"_3-反射型xss\"}},[t(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#_3-反射型xss\"}},[s._v(\"#\")]),s._v(\" （3）反射型XSS\")]),s._v(\" \"),t(\"p\",[s._v(\"反射型XSS攻击是一种非持久性的攻击，黑客通过特定手法，比如在地址后面传入一个参数或者一个\"),t(\"code\",[s._v(\"script\")]),s._v(\"脚本，或者诱使用户去访问一个包含恶意代码的URL，当受害者真的访问这些含有恶意脚本的网站时，恶意脚本代码会直接在受害者主机上的浏览器执行。此类攻击一般出现在网站的搜索栏、用户登录口等，常用来窃取客户端Cookies或进行钓鱼欺骗 。\")]),s._v(\" \"),t(\"p\",[s._v(\"举个例子：\")]),s._v(\" \"),t(\"p\",[s._v(\"这是后端代码\"),t(\"code\",[s._v(\"server.js\")]),s._v(\"：\")]),s._v(\" \"),t(\"div\",{staticClass:\"language- line-numbers-mode\"},[t(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[t(\"code\",[s._v(\"// express自带路由\\nconst express = require('express')\\nconst path = require('path')\\nconst app = express()\\napp.set('views', path.join(__dirname, 'views'))//读取根目录下的views文件夹\\napp.engine('html', require('ejs').renderFile) //ejs模板引擎\\napp.set('view engine', 'html') //读取的模板文件,即views/index.html\\napp.get('/', function(req, res, next) {\\n    console.log(req.query.xss);\\n    res.render('index', { //render渲染模板\\n        title: \\\"Express\\\",\\n        xss: req.query.xss\\n    })\\n})\\napp.listen(3030, () => {\\n    console.log('项目已启动~');\\n})\\n​\\n\")])]),s._v(\" \"),t(\"div\",{staticClass:\"line-numbers-wrapper\"},[t(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"2\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"3\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"4\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"5\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"6\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"7\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"8\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"9\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"10\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"11\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"12\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"13\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"14\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"15\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"16\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"17\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"18\")]),t(\"br\")])]),t(\"p\",[s._v(\"这里是前端代码\"),t(\"code\",[s._v(\"index.html\")]),s._v(\"：\")]),s._v(\" \"),t(\"div\",{staticClass:\"language- line-numbers-mode\"},[t(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[t(\"code\",[s._v(\"    <body>\\n        <p>welcome to <%= title  %></p>\\n        <div>\\n            <%- xss%>\\n        </div>\\n    </body>\\n\")])]),s._v(\" \"),t(\"div\",{staticClass:\"line-numbers-wrapper\"},[t(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"2\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"3\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"4\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"5\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"6\")]),t(\"br\")])]),t(\"p\",[s._v(\"当启动后端\"),t(\"code\",[s._v(\"node server.js\")]),s._v(\"后，在浏览器访问\"),t(\"code\",[s._v(\"https://localhost:3030\")]),s._v(\"，会出现以下界面：\")]),s._v(\" \"),t(\"p\",[t(\"img\",{attrs:{src:\"https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/0068bbf296e14be5be24ea21cf1c7c17~tplv-k3u1fbpfcp-watermark.image?\",alt:\"image.png\"}})]),s._v(\" \"),t(\"p\",[s._v(\"接下来，如果直接在后面传入一个xss字段的参数，会发生什么？\")]),s._v(\" \"),t(\"p\",[t(\"img\",{attrs:{src:\"https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/be570deefd164091a576f158fc155861~tplv-k3u1fbpfcp-watermark.image?\",alt:\"image.png\"}})]),s._v(\" \"),t(\"p\",[s._v(\"设置url的参数后，参数的内容直接在页面上展示了！那如果换成脚本，是不是真的会执行呢？\")]),s._v(\" \"),t(\"p\",[t(\"img\",{attrs:{src:\"https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/9a4e82008d974fbca69679eb4a966c81~tplv-k3u1fbpfcp-watermark.image?\",alt:\"image.png\"}})]),s._v(\" \"),t(\"p\",[s._v(\"！！！是真的会直接执行，太可怕了~。\")]),s._v(\" \"),t(\"h3\",{attrs:{id:\"_4-基于dom的xss\"}},[t(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#_4-基于dom的xss\"}},[s._v(\"#\")]),s._v(\" （4）基于DOM的XSS\")]),s._v(\" \"),t(\"p\",[s._v(\"基于DOM的XSS也是一种非持久性的攻击，⾮持久型的攻击相⽐于持久性的攻击危害就⼩的多了，⼀般通过\"),t(\"strong\",[s._v(\"修改\")]),s._v(\" \"),t(\"strong\",[s._v(\"URL\")]),s._v(\" \"),t(\"strong\",[s._v(\"参数\")]),s._v(\"的⽅式加⼊攻击代码，诱导⽤户访问链接从⽽进⾏攻击。我们知道客户端的脚本程序可以动态地检查和修改页面内容，而不依赖于服务器端的数据。比方说，客户端如从URL中提取数据并在本地执行，如果用户在客户端输入的数据包含了恶意的脚本代码，并且这些脚本没有进行过滤或者转码，则应用程序就可能受到基于DOM的XSS攻击。\")]),s._v(\" \"),t(\"p\",[s._v(\"需要特别注意以下的用户输入源document.URL、location.hash、location.search、document.referrer等。\")]),s._v(\" \"),t(\"h2\",{attrs:{id:\"二、xss有哪些危害\"}},[t(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#二、xss有哪些危害\"}},[s._v(\"#\")]),s._v(\" 二、XSS有哪些危害？\")]),s._v(\" \"),t(\"div\",{staticClass:\"language- line-numbers-mode\"},[t(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[t(\"code\",[s._v(\"    A.修改DOM结构，伪造页面，欺骗用户，获取账户密码等信息\\n    B.在页面内生成浮窗广告，影响用户体验\\n    C.恶意的JS会监听用户行为，比如addEventListener('keydown'),窃取用户信息\\n    D.窃取cookie信息，通过document.cookie()窃取，\\n\")])]),s._v(\" \"),t(\"div\",{staticClass:\"line-numbers-wrapper\"},[t(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"2\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"3\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"4\")]),t(\"br\")])]),t(\"h2\",{attrs:{id:\"三、如何防范xss\"}},[t(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#三、如何防范xss\"}},[s._v(\"#\")]),s._v(\" 三、如何防范XSS？\")]),s._v(\" \"),t(\"h3\",{attrs:{id:\"_1-服务器对脚本进行过滤和转码\"}},[t(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#_1-服务器对脚本进行过滤和转码\"}},[s._v(\"#\")]),s._v(\" （1）服务器对脚本进行过滤和转码\")]),s._v(\" \"),t(\"p\",[s._v(\"⾸先，对于⽤户的输⼊应该是永远不信任的。最普遍的做法就是转义输⼊输出的内容，对于引号、尖括号、斜杠进⾏转义，基于上述后端\"),t(\"code\",[s._v(\"server.js\")]),s._v(\"，可以通过后端对前端接收的路径参数进行转码，即把\"),t(\"code\",[s._v(\"javascript\")]),s._v(\"脚本变成不能识别成功执行的字符串既可，所以我们给后端添加转码操作：\")]),s._v(\" \"),t(\"div\",{staticClass:\"language- line-numbers-mode\"},[t(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[t(\"code\",[s._v(\"// 阻止恶意脚本注入，转码\\nfunction transCode(str) {\\n    str = str.replace(/&/g, '&amp;')\\n    str = str.replace(/</g, '&lt;')\\n    str = str.replace(/>/g, '&gt;')\\n    str = str.replace(/\\\"/g, '&quto;')\\n    str = str.replace(/'/g, '&#39;')\\n    str = str.replace(/`/g, '&#96;')\\n    str = str.replace(///g, '&#x2F;')\\n    return str\\n}\\n​\\n​\\napp.get('/', function(req, res, next) {\\n    console.log(req.query.xss);\\n    res.render('index', { //render渲染模板\\n        title: \\\"Express\\\",\\n        xss: req.query.xss ? transCode(req.query.xss) : ''\\n    })\\n})\\n\")])]),s._v(\" \"),t(\"div\",{staticClass:\"line-numbers-wrapper\"},[t(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"2\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"3\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"4\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"5\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"6\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"7\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"8\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"9\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"10\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"11\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"12\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"13\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"14\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"15\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"16\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"17\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"18\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"19\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"20\")]),t(\"br\")])]),t(\"p\",[s._v(\"进行转码后，脚本代码就不会再执行了。如图所示：\")]),s._v(\" \"),t(\"p\",[t(\"img\",{attrs:{src:\"https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/1b2ab44876af4c5eb35ba8d97f8fa6b7~tplv-k3u1fbpfcp-watermark.image?\",alt:\"image.png\"}})]),s._v(\" \"),t(\"h3\",{attrs:{id:\"_2-充分利用csp\"}},[t(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#_2-充分利用csp\"}},[s._v(\"#\")]),s._v(\" （2）充分利用CSP\")]),s._v(\" \"),t(\"p\",[s._v(\"CSP，Content-Security-Policy，是服务器的安全策略，本质上就是建⽴⽩名单，开发者明确告诉浏览器哪些外部资源可以加载和执⾏。限制加载其他域下的资源文件、禁止向第三方提交数据，可有效防范XSS攻击。开启CSP：\")]),s._v(\" \"),t(\"div\",{staticClass:\"language- line-numbers-mode\"},[t(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[t(\"code\",[s._v('1. 设置 HTTP Header 中的 Content-Security-Policy\\n//设值default-src \"self\"只允许加载本站资源\\n//设值child-src \"none\" 允许加载任何来源框架\\n//设值img-src https://*只允许加载https协议图片\\n2.设置 meta 标签的方式 <meta http-equiv=\"Content-Security-Policy\">\\n')])]),s._v(\" \"),t(\"div\",{staticClass:\"line-numbers-wrapper\"},[t(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"2\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"3\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"4\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"5\")]),t(\"br\")])]),t(\"h2\",{attrs:{id:\"四、应用场景\"}},[t(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#四、应用场景\"}},[s._v(\"#\")]),s._v(\" 四、应用场景\")]),s._v(\" \"),t(\"p\",[s._v(\"平常在通过\"),t(\"code\",[s._v(\"javascript\")]),s._v(\"直接使用 innerHTML 插入文本内容，存在 XSS 攻击的风险，举个例子：\")]),s._v(\" \"),t(\"div\",{staticClass:\"language-javascript line-numbers-mode\"},[t(\"pre\",{pre:!0,attrs:{class:\"language-javascript\"}},[t(\"code\",[s._v(\" \\t\"),t(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"<\")]),s._v(\"div id\"),t(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"=\")]),t(\"span\",{pre:!0,attrs:{class:\"token string\"}},[s._v('\"box\"')]),t(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\">\")]),t(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"<\")]),t(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"/\")]),s._v(\"div\"),t(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\">\")]),s._v(\"\\n    \"),t(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"<\")]),s._v(\"script\"),t(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\">\")]),s._v(\"\\n        \"),t(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[s._v(\"let\")]),s._v(\" box\"),t(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"=\")]),s._v(\"document\"),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\".\")]),t(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"getElementById\")]),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"(\")]),t(\"span\",{pre:!0,attrs:{class:\"token string\"}},[s._v(\"'box'\")]),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\")\")]),s._v(\"\\n        \"),t(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"// let content='hello world'\")]),s._v(\"\\n        \"),t(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[s._v(\"let\")]),s._v(\" content\"),t(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"=\")]),t(\"span\",{pre:!0,attrs:{class:\"token string\"}},[s._v(\"'<img src onerror=\\\"alert(1)\\\">'\")]),s._v(\"\\n        box\"),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\".\")]),s._v(\"innerHTML \"),t(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"=\")]),s._v(\" \"),t(\"span\",{pre:!0,attrs:{class:\"token string\"}},[s._v('\"<p>\"')]),t(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"+\")]),s._v(\"content\"),t(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"+\")]),t(\"span\",{pre:!0,attrs:{class:\"token string\"}},[s._v('\"</p>\"')]),s._v(\"\\n    \"),t(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"<\")]),t(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"/\")]),s._v(\"script\"),t(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\">\")]),s._v(\"\\n\")])]),s._v(\" \"),t(\"div\",{staticClass:\"line-numbers-wrapper\"},[t(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"2\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"3\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"4\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"5\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"6\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"7\")]),t(\"br\")])]),t(\"p\",[s._v(\"用户一打开页面，就能看到恶意图片信息，如图所示：\")]),s._v(\" \"),t(\"p\",[t(\"img\",{attrs:{src:\"https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/c997ab206fef408c9d88ce51bda7101d~tplv-k3u1fbpfcp-watermark.image?\",alt:\"image.png\"}})]),s._v(\" \"),t(\"p\",[s._v(\"所以，像\"),t(\"code\",[s._v(\"React\")]),s._v(\"和\"),t(\"code\",[s._v(\"Vue\")]),s._v(\"内部都有做防范XSS攻击的操作，来看看\"),t(\"code\",[s._v(\"React\")]),s._v(\"是如何防范的吧~：\")]),s._v(\" \"),t(\"div\",{staticClass:\"language-javascript line-numbers-mode\"},[t(\"pre\",{pre:!0,attrs:{class:\"language-javascript\"}},[t(\"code\",[s._v(\"\\t\\t\"),t(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"<\")]),s._v(\"div id\"),t(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"=\")]),t(\"span\",{pre:!0,attrs:{class:\"token string\"}},[s._v('\"root\"')]),t(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\">\")]),t(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"<\")]),t(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"/\")]),s._v(\"div\"),t(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\">\")]),s._v(\"\\n\\t\\t\"),t(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"<\")]),s._v(\"script type\"),t(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"=\")]),t(\"span\",{pre:!0,attrs:{class:\"token string\"}},[s._v('\"text/babel\"')]),t(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\">\")]),s._v(\"\\n         \"),t(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[s._v(\"class\")]),s._v(\" \"),t(\"span\",{pre:!0,attrs:{class:\"token class-name\"}},[s._v(\"Weather\")]),s._v(\" \"),t(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[s._v(\"extends\")]),s._v(\" \"),t(\"span\",{pre:!0,attrs:{class:\"token class-name\"}},[s._v(\"React\"),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\".\")]),s._v(\"Component\")]),s._v(\" \"),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"{\")]),s._v(\"\\n                \"),t(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"render\")]),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"(\")]),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\")\")]),s._v(\" \"),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"{\")]),s._v(\"\\n\\t\\t\\t\\t\\t\"),t(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[s._v(\"let\")]),s._v(\" content\"),t(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"=\")]),t(\"span\",{pre:!0,attrs:{class:\"token string\"}},[s._v(\"'<img src onerror=\\\"alert(11111111111111111)\\\">'\")]),s._v(\"\\n\\n\\t\\t\\t\\t\\t\"),t(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[s._v(\"return\")]),s._v(\" \"),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"(\")]),s._v(\"\\n\\t\\t\\t\\t\\t\\t\"),t(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"<\")]),s._v(\"div\"),t(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\">\")]),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"{\")]),s._v(\"content\"),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"}\")]),t(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"<\")]),t(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"/\")]),s._v(\"div\"),t(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\">\")]),s._v(\"\\n\\t\\t\\t\\t\\t\"),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\")\")]),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\";\")]),s._v(\"\\n\\t\\t\\t\\t\"),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"}\")]),s._v(\"\\n            \"),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"}\")]),s._v(\"\\n\\t\\t\\tReactDOM\"),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\".\")]),t(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"render\")]),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"(\")]),s._v(\" \"),t(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"<\")]),s._v(\" Weather \"),t(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"/\")]),s._v(\" \"),t(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\">\")]),s._v(\" \"),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\",\")]),s._v(\" document\"),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\".\")]),t(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"getElementById\")]),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"(\")]),t(\"span\",{pre:!0,attrs:{class:\"token string\"}},[s._v(\"'root'\")]),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\")\")]),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\")\")]),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\";\")]),s._v(\"\\n\\t\\t\"),t(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"<\")]),t(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"/\")]),s._v(\"script\"),t(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\">\")]),s._v(\"\\n\")])]),s._v(\" \"),t(\"div\",{staticClass:\"line-numbers-wrapper\"},[t(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"2\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"3\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"4\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"5\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"6\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"7\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"8\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"9\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"10\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"11\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"12\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"13\")]),t(\"br\")])]),t(\"p\",[t(\"img\",{attrs:{src:\"https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/c3f93e4c76024a8f9349cfe2a49eedfb~tplv-k3u1fbpfcp-watermark.image?\",alt:\"image.png\"}})]),s._v(\" \"),t(\"p\",[s._v(\"如图所示，对于同样的恶意代码或者脚本，\"),t(\"code\",[s._v(\"react\")]),s._v(\"不会遭受XSS攻击，这是为何？\")]),s._v(\" \"),t(\"p\",[s._v(\"这是因为\"),t(\"code\",[s._v(\"React\")]),s._v(\"在渲染页面的过程中对于普通文本节点来说，采用的是\"),t(\"code\",[s._v(\"testContent\")]),s._v(\"或者\"),t(\"code\",[s._v(\"createTextNode\")]),s._v(\"的方式为DOM动态添加内容，即设置文本内容，因此不会有遭受XSS攻击的风险；而对于富文本内容，\"),t(\"code\",[s._v(\"React\")]),s._v(\"使用\"),t(\"code\",[s._v(\"documentSetInnerHTML\")]),s._v(\"的方式去添加富文本内容，在更新DOM某些属性的时候，会判断该属性是否为\"),t(\"code\",[s._v(\"dangerousSetInnerHTML\")]),s._v(\"，如果是，就会调用\"),t(\"code\",[s._v(\"setInnerHTML\")]),s._v(\"直接给DOM的\"),t(\"code\",[s._v(\"innerHTML\")]),s._v(\"设置文本内容，所以在处理富文本时，潜在着安全风险。\")])])}),[],!1,null,null,null);t.default=n.exports}}]);","extractedComments":[]}